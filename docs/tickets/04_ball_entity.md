# チケット: ボールエンティティ実装

## 概要
ゲームの中核となるボールエンティティを実装する。移動、加速、最大速度制限の機能を持つ。

## 実装内容
- ボールクラス（15x15ピクセルの正方形）
- 速度ベクトル（x, y方向）の管理
- 移動処理と速度更新
- 加速機能（パドル反射時5%増加）
- 最大速度制限（700ピクセル/秒）

## ToDo（TDD実装順）

### 1. Ballクラスの基本テストを作成
- [x] tests/test_ball.pyを作成
- [x] Ballクラスの初期化テストを記述
- [x] サイズ（15x15）の確認テストを記述
- [x] テストを実行して失敗することを確認

### 2. Ballクラスの基本実装
- [x] src/game/entities/ball.pyを作成
- [x] Ballクラスを定義
- [x] SIZE = 15の定数を定義
- [x] __init__メソッドを実装（x, y座標を受け取る）
- [x] テストを実行して成功することを確認

### 3. 初期位置と速度のテストを作成
- [x] 初期位置（画面中央）のテストを追加
- [x] 初期速度（300ピクセル/秒）のテストを追加
- [x] 速度ベクトル（vx, vy）の存在テストを追加
- [x] テストを実行して失敗することを確認

### 4. 初期位置と速度を実装
- [x] reset()メソッドを実装
- [x] 画面中央座標の計算を実装
- [x] INITIAL_SPEED = 300を定義
- [x] ランダムな方向への速度分配を実装
- [x] テストを実行して成功することを確認

### 5. 移動機能のテストを作成
- [x] update()メソッドのテストを追加
- [x] delta_timeに応じた位置更新のテストを追加
- [x] テストを実行して失敗することを確認

### 6. 移動機能を実装
- [x] update(delta_time)メソッドを実装
- [x] x += vx * delta_timeの処理を追加
- [x] y += vy * delta_timeの処理を追加
- [x] テストを実行して成功することを確認

### 7. 速度管理のテストを作成
- [x] get_speed()メソッドのテストを追加
- [x] set_velocity()メソッドのテストを追加
- [x] 速度の大きさ計算のテストを追加
- [x] テストを実行して失敗することを確認

### 8. 速度管理を実装
- [x] get_speed()メソッドを実装（√(vx²+vy²)を返す）
- [x] set_velocity(vx, vy)メソッドを実装
- [x] 速度ベクトルの正規化処理を実装
- [x] テストを実行して成功することを確認

### 9. 加速機能のテストを作成
- [x] accelerate()メソッドのテストを追加
- [x] 5%速度増加のテストを追加
- [x] 速度方向が維持されることのテストを追加
- [x] テストを実行して失敗することを確認

### 10. 加速機能を実装
- [x] ACCELERATION_RATE = 1.05を定義
- [x] accelerate()メソッドを実装
- [x] 現在の速度に1.05を掛ける処理を追加
- [x] テストを実行して成功することを確認

### 11. 最大速度制限のテストを作成
- [x] 最大速度（700）を超えないことのテストを追加
- [x] 最大速度時の速度制限テストを追加
- [x] テストを実行して失敗することを確認

### 12. 最大速度制限を実装
- [x] MAX_SPEED = 700を定義
- [x] accelerate()に最大速度チェックを追加
- [x] 速度が700を超える場合のクランプ処理を実装
- [x] テストを実行して成功することを確認

### 13. 描画機能のテストを作成
- [x] draw()メソッドのテストを追加
- [x] 白色(255,255,255)で描画されることのテストを追加
- [x] テストを実行して失敗することを確認

### 14. 描画機能を実装
- [x] draw(screen)メソッドを実装
- [x] pygame.Rectで正方形を生成
- [x] pygame.draw.rect()で白色描画を実装
- [x] 全テストを実行して成功することを確認

## 完了条件
- [x] ボールが15x15の正方形として描画される
- [x] 初期速度300、最大速度700が守られる
- [x] パドル反射時に5%加速する
- [x] pytest tests/test_ball.pyが全てパスする